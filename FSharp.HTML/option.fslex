%{
open System
open FSharp.HTML
open FSharp.HTML.OptionTokenUtils
type token = HtmlToken
%}

follow = [ 
	"<option>" "<option/>"
	"<optgroup>" "<optgroup/>" 
	
	"</optgroup>" 
	"</select>" 
	"</datalist>" 
	]

any = COMMENT|TEXT|CDATA|EOF
    | TAGSTART
    | TAGEND
    | TAGSELFCLOSING
    | <follow> | "</option>"

%%

"<option>" TEXT * "</option>" { lexbuf }
"<option>" TEXT * / <follow>  { lexbuf @ [TagEnd "option"] }
<any>                         { lexbuf }



